

<!DOCTYPE html>
<html lang="tw">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Compound Interest Calculator</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
      background: linear-gradient(135deg, #059669 0%, #047857 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .container {
      background: white;
      border-radius: 20px;
      padding: 30px;
      width: 100%;
      max-width: 500px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.2);
    }

    h1 {
      text-align: center;
      color: #047857;
      margin-bottom: 8px;
      font-size: 1.8rem;
    }

    .subtitle {
      text-align: center;
      color: #64748b;
      margin-bottom: 25px;
      font-size: 0.9rem;
    }

    .input-group {
      margin-bottom: 18px;
    }

    .input-label {
      display: block;
      font-size: 0.85rem;
      color: #64748b;
      margin-bottom: 6px;
      font-weight: 500;
    }

    .input-wrapper {
      position: relative;
    }

    .input-prefix, .input-suffix {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      color: #64748b;
      font-weight: 500;
    }

    .input-prefix {
      left: 14px;
    }

    .input-suffix {
      right: 14px;
    }

    .number-input {
      width: 100%;
      padding: 12px 14px;
      border: 2px solid #e2e8f0;
      border-radius: 10px;
      font-size: 1rem;
      transition: border-color 0.2s;
    }

    .number-input:focus {
      outline: none;
      border-color: #059669;
    }

    .number-input.has-prefix {
      padding-left: 30px;
    }

    .number-input.has-suffix {
      padding-right: 50px;
    }

    .compound-options {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 8px;
    }

    .compound-btn {
      padding: 10px 8px;
      border: 2px solid #e2e8f0;
      background: white;
      border-radius: 8px;
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .compound-btn:hover {
      border-color: #059669;
    }

    .compound-btn.active {
      background: #059669;
      border-color: #059669;
      color: white;
    }

    .results {
      margin-top: 25px;
      padding-top: 25px;
      border-top: 1px solid #e2e8f0;
    }

    .result-cards {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin-bottom: 20px;
    }

    .result-card {
      background: #f0fdf4;
      border-radius: 12px;
      padding: 15px;
      text-align: center;
    }

    .result-card.highlight {
      background: linear-gradient(135deg, #059669 0%, #047857 100%);
      color: white;
      grid-column: span 2;
    }

    .result-label {
      font-size: 0.8rem;
      margin-bottom: 4px;
      opacity: 0.8;
    }

    .result-card.highlight .result-label {
      color: rgba(255,255,255,0.85);
    }

    .result-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: #059669;
    }

    .result-card.highlight .result-value {
      color: white;
      font-size: 2rem;
    }

    .chart-container {
      background: #f8fafc;
      border-radius: 12px;
      padding: 20px;
      margin-top: 20px;
      overflow: visible;
    }

    .chart-title {
      font-size: 0.9rem;
      font-weight: 600;
      color: #475569;
      margin-bottom: 15px;
      text-align: center;
    }

    .chart {
      height: 200px;
      display: flex;
      align-items: flex-end;
      gap: 4px;
      padding: 10px 0;
    }

    .chart-bar {
      flex: 1;
      background: linear-gradient(to top, #059669 0%, #34d399 100%);
      border-radius: 4px 4px 0 0;
      position: relative;
      min-height: 4px;
      transition: height 0.3s;
    }

    .chart-bar:hover::after {
      content: attr(data-value);
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: #1e293b;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 0.75rem;
      white-space: nowrap;
      margin-bottom: 4px;
      z-index: 10;
    }

    /* Prevent tooltip overflow on right edge */
    .chart-bar:last-child:hover::after,
    .chart-bar:nth-last-child(2):hover::after {
      left: auto;
      right: 0;
      transform: none;
    }

    /* Prevent tooltip overflow on left edge */
    .chart-bar:first-child:hover::after,
    .chart-bar:nth-child(2):hover::after {
      left: 0;
      transform: none;
    }

    .chart-labels {
      display: flex;
      justify-content: space-between;
      font-size: 0.75rem;
      color: #94a3b8;
      margin-top: 8px;
    }

    .breakdown {
      margin-top: 20px;
    }

    .breakdown-title {
      font-size: 0.9rem;
      font-weight: 600;
      color: #475569;
      margin-bottom: 10px;
    }

    .breakdown-bar {
      height: 24px;
      border-radius: 12px;
      overflow: hidden;
      display: flex;
    }

    .breakdown-principal {
      background: #94a3b8;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 0.75rem;
      font-weight: 500;
      transition: width 0.3s;
    }

    .breakdown-interest {
      background: #059669;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 0.75rem;
      font-weight: 500;
      transition: width 0.3s;
    }

    .breakdown-legend {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 10px;
      font-size: 0.8rem;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .legend-dot {
      width: 12px;
      height: 12px;
      border-radius: 3px;
    }

    .lang-toggle {
      position: fixed;
      top: 15px;
      right: 15px;
      padding: 8px 12px;
      background: rgba(255,255,255,0.9);
      border: 2px solid #059669;
      border-radius: 20px;
      color: #059669;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.2s;
      z-index: 100;
    }

    .lang-toggle:hover {
      background: #059669;
      color: white;
    }

    @media (max-width: 500px) {
      .compound-options {
        grid-template-columns: repeat(2, 1fr);
      }

      .result-cards {
        grid-template-columns: 1fr;
      }

      .result-card.highlight {
        grid-column: span 1;
      }
    }
  </style>
</head>
<body>
  <button class="lang-toggle" onclick="switchLanguage()">
    <span id="langToggleText">ä¸­æ–‡</span>
  </button>

  <div class="container">
    <h1 data-i18n="title">ðŸ“ˆ Compound Interest</h1>
    <p class="subtitle" data-i18n="subtitle">Calculate how your money grows over time</p>

    <div class="input-group">
      <label class="input-label" data-i18n="initialInvestment">Initial Investment</label>
      <div class="input-wrapper">
        <span class="input-prefix">$</span>
        <input type="number" class="number-input has-prefix" id="principal" value="10000" min="0" step="100">
      </div>
    </div>

    <div class="input-group">
      <label class="input-label" data-i18n="monthlyContribution">Monthly Contribution</label>
      <div class="input-wrapper">
        <span class="input-prefix">$</span>
        <input type="number" class="number-input has-prefix" id="monthlyAdd" value="200" min="0" step="50">
      </div>
    </div>

    <div class="input-group">
      <label class="input-label" data-i18n="annualRate">Annual Interest Rate</label>
      <div class="input-wrapper">
        <input type="number" class="number-input has-suffix" id="rate" value="7" min="0" max="100" step="0.1">
        <span class="input-suffix">%</span>
      </div>
    </div>

    <div class="input-group">
      <label class="input-label" data-i18n="timePeriod">Time Period (Years)</label>
      <input type="number" class="number-input" id="years" value="10" min="1" max="50">
    </div>

    <div class="input-group">
      <label class="input-label" data-i18n="compoundFrequency">Compound Frequency</label>
      <div class="compound-options">
        <button class="compound-btn" data-freq="1" data-i18n="annually" onclick="selectFrequency(1)">Annually</button>
        <button class="compound-btn" data-freq="4" data-i18n="quarterly" onclick="selectFrequency(4)">Quarterly</button>
        <button class="compound-btn active" data-freq="12" data-i18n="monthly" onclick="selectFrequency(12)">Monthly</button>
        <button class="compound-btn" data-freq="365" data-i18n="daily" onclick="selectFrequency(365)">Daily</button>
      </div>
    </div>

    <div class="results" id="results">
      <div class="result-cards">
        <div class="result-card highlight">
          <div class="result-label" data-i18n="futureValue">Future Value</div>
          <div class="result-value" id="futureValue">$0</div>
        </div>
        <div class="result-card">
          <div class="result-label" data-i18n="totalContributions">Total Contributions</div>
          <div class="result-value" id="totalContributions">$0</div>
        </div>
        <div class="result-card">
          <div class="result-label" data-i18n="totalInterest">Total Interest Earned</div>
          <div class="result-value" id="totalInterest">$0</div>
        </div>
      </div>

      <div class="breakdown">
        <div class="breakdown-title" data-i18n="principalVsInterest">Principal vs Interest</div>
        <div class="breakdown-bar">
          <div class="breakdown-principal" id="principalBar" style="width: 50%;">50%</div>
          <div class="breakdown-interest" id="interestBar" style="width: 50%;">50%</div>
        </div>
        <div class="breakdown-legend">
          <div class="legend-item">
            <div class="legend-dot" style="background: #94a3b8;"></div>
            <span data-i18n="contributions">Contributions</span>
          </div>
          <div class="legend-item">
            <div class="legend-dot" style="background: #059669;"></div>
            <span data-i18n="interest">Interest</span>
          </div>
        </div>
      </div>

      <div class="chart-container">
        <div class="chart-title" data-i18n="growthOverTime">Growth Over Time</div>
        <div class="chart" id="chart"></div>
        <div class="chart-labels">
          <span data-i18n="year1">Year 1</span>
          <span id="chartEndLabel">Year 10</span>
        </div>
      </div>
    </div>
  </div>

  <script>
    let compoundFrequency = 12;
    let currentLanguage = 'en';

    const translations = {
      en: {
        title: 'ðŸ“ˆ Compound Interest',
        subtitle: 'Calculate how your money grows over time',
        initialInvestment: 'Initial Investment',
        monthlyContribution: 'Monthly Contribution',
        annualRate: 'Annual Interest Rate',
        timePeriod: 'Time Period (Years)',
        compoundFrequency: 'Compound Frequency',
        annually: 'Annually',
        quarterly: 'Quarterly',
        monthly: 'Monthly',
        daily: 'Daily',
        futureValue: 'Future Value',
        totalContributions: 'Total Contributions',
        totalInterest: 'Total Interest Earned',
        principalVsInterest: 'Principal vs Interest',
        contributions: 'Contributions',
        interest: 'Interest',
        growthOverTime: 'Growth Over Time',
        year1: 'Year 1',
        yearX: 'Year',
        documentTitle: 'Compound Interest Calculator'
      },
      'zh-Hant': {
        title: 'ðŸ“ˆ è¤‡åˆ©è¨ˆç®—æ©Ÿ',
        subtitle: 'è¨ˆç®—æ‚¨çš„è³‡é‡‘éš¨æ™‚é–“å¢žé•·',
        initialInvestment: 'åˆå§‹æŠ•è³‡',
        monthlyContribution: 'æ¯æœˆæŠ•å…¥',
        annualRate: 'å¹´åˆ©çŽ‡',
        timePeriod: 'æŠ•è³‡æœŸé–“ï¼ˆå¹´ï¼‰',
        compoundFrequency: 'è¤‡åˆ©é »çŽ‡',
        annually: 'æ¯å¹´',
        quarterly: 'æ¯å­£',
        monthly: 'æ¯æœˆ',
        daily: 'æ¯æ—¥',
        futureValue: 'æœªä¾†åƒ¹å€¼',
        totalContributions: 'æŠ•å…¥ç¸½é¡',
        totalInterest: 'åˆ©æ¯æ”¶ç›Š',
        principalVsInterest: 'æœ¬é‡‘èˆ‡åˆ©æ¯',
        contributions: 'æŠ•å…¥é‡‘é¡',
        interest: 'åˆ©æ¯',
        growthOverTime: 'æˆé•·è¶¨å‹¢',
        year1: 'ç¬¬ 1 å¹´',
        yearX: 'ç¬¬',
        documentTitle: 'è¤‡åˆ©è¨ˆç®—æ©Ÿ'
      }
    };

    function getDefaultLanguage() {
      const saved = localStorage.getItem('preferredLanguage');
      if (saved) return saved;

      const browserLang = navigator.language || navigator.languages?.[0] || 'en';
      return browserLang.toLowerCase().startsWith('zh') ? 'zh-Hant' : 'en';
    }

    function switchLanguage() {
      currentLanguage = currentLanguage === 'en' ? 'zh-Hant' : 'en';
      localStorage.setItem('preferredLanguage', currentLanguage);
      updateLanguage();
    }

    function updateLanguage() {
      const t = translations[currentLanguage];

      // Update all elements with data-i18n attribute
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (t[key]) {
          el.textContent = t[key];
        }
      });

      // Update language toggle button
      document.getElementById('langToggleText').textContent = currentLanguage === 'en' ? 'ä¸­æ–‡' : 'EN';

      // Update document title
      document.title = t.documentTitle;

      // Recalculate to update chart labels with correct language
      calculate();
    }

    function loadSavedLanguage() {
      currentLanguage = getDefaultLanguage();
      updateLanguage();
    }

    function selectFrequency(freq) {
      compoundFrequency = freq;
      document.querySelectorAll('.compound-btn').forEach(btn => {
        btn.classList.toggle('active', parseInt(btn.dataset.freq) === freq);
      });
      calculate();
    }

    function formatCurrency(amount) {
      if (amount >= 1000000) {
        return '$' + (amount / 1000000).toFixed(2) + 'M';
      } else if (amount >= 1000) {
        return '$' + (amount / 1000).toFixed(1) + 'K';
      }
      return '$' + amount.toFixed(0);
    }

    function formatCurrencyFull(amount) {
      return '$' + amount.toLocaleString('en-US', { maximumFractionDigits: 0 });
    }

    function calculate() {
      const principal = parseFloat(document.getElementById('principal').value) || 0;
      const monthlyAdd = parseFloat(document.getElementById('monthlyAdd').value) || 0;
      const rate = parseFloat(document.getElementById('rate').value) / 100 || 0;
      const years = parseInt(document.getElementById('years').value) || 1;
      const n = compoundFrequency;

      // Calculate future value with compound interest and regular contributions
      const yearlyData = [];
      let currentValue = principal;
      const periodicRate = rate / n;
      const periodsPerYear = n;

      for (let year = 1; year <= years; year++) {
        for (let period = 0; period < periodsPerYear; period++) {
          // Add interest
          currentValue *= (1 + periodicRate);

          // Add monthly contributions (convert to periodic if needed)
          if (n >= 12) {
            // If compounding monthly or more frequently
            currentValue += monthlyAdd * (12 / n);
          } else {
            // If compounding less than monthly, add all months worth at compound time
            currentValue += monthlyAdd * (12 / n);
          }
        }
        yearlyData.push(currentValue);
      }

      const futureValue = currentValue;
      const totalContributions = principal + (monthlyAdd * 12 * years);
      const totalInterest = futureValue - totalContributions;

      // Update display
      document.getElementById('futureValue').textContent = formatCurrencyFull(futureValue);
      document.getElementById('totalContributions').textContent = formatCurrencyFull(totalContributions);
      document.getElementById('totalInterest').textContent = formatCurrencyFull(totalInterest);

      // Update breakdown bar
      const contributionPercent = (totalContributions / futureValue) * 100;
      const interestPercent = (totalInterest / futureValue) * 100;

      document.getElementById('principalBar').style.width = contributionPercent + '%';
      document.getElementById('principalBar').textContent = Math.round(contributionPercent) + '%';
      document.getElementById('interestBar').style.width = interestPercent + '%';
      document.getElementById('interestBar').textContent = Math.round(interestPercent) + '%';

      // Update chart
      renderChart(yearlyData);
      const t = translations[currentLanguage];
      document.getElementById('chartEndLabel').textContent = t.yearX + ' ' + years;
    }

    function renderChart(data) {
      const chart = document.getElementById('chart');
      const maxValue = Math.max(...data);
      const t = translations[currentLanguage];

      chart.innerHTML = data.map((value, i) => {
        const height = (value / maxValue) * 100;
        const yearLabel = t.yearX + ' ' + (i + 1);
        return `<div class="chart-bar" style="height: ${height}%" data-value="${formatCurrency(value)} (${yearLabel})"></div>`;
      }).join('');
    }

    // Auto-calculate on input change
    document.querySelectorAll('input').forEach(input => {
      input.addEventListener('input', calculate);
    });

    // Load saved language and initial calculation
    loadSavedLanguage();
    calculate();
  </script>
</body>
</html>
